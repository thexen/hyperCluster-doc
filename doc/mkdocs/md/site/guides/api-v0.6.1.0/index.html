<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Version 0.6.1.0 - HyperCluster</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Version 0.6.1.0";
        var mkdocs_page_input_path = "guides\\api-v0.6.1.0.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> HyperCluster
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../intro/">Introduction</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../keyconc/">Key Concepts</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../">User Guides</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../api-syntax/">Syntax</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api-v0.6.0.0/">Version 0.6.0.0</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Version 0.6.1.0</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#objectstorage-synchronization">Objectstorage Synchronization</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#upload">Upload</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#get-fileinfo">Get Fileinfo</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#download">Download</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#get-prefix">Get Prefix</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../glossary/">Glossary</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../explorer/">Explorer</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../release-notes/">Release notes</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../license/">License</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../tutorials/">Tutorials</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">HyperCluster</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>API &raquo;</li><li>Version 0.6.1.0</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="api">API</h1>
<p><strong><em>Version 0.6.1.0에서 추가된 모든 API 안내서.</em></strong></p>
<hr />
<h2 id="objectstorage-synchronization">Objectstorage Synchronization</h2>
<p><strong>API를 설명합니다.</strong></p>
<p>사용자가 접속한 <code>peer</code>에서 Objectstorage Synchronization API를 사용 할 경우 <code>cluster</code>에 참여한 모든 <code>peer</code>들에게 업로드 중인 파일이
실시간으로 sync가 진행됩니다.</p>
<h3 id="upload">Upload</h3>
<p>업로드 방법은 Version 0.6.0.0에서 설명한 업로드 API와 동일하며 업로드 된 파일은 HASH Code로 중복 확인을 거친후 중복제거 된 파일들만
저장소에 저장이 됩니다.
그리고 metadata는 mongodb와 연동하여 관리 됩니다.</p>
<p>인증없이 다운로드를 가능하게 할려면 <code>disclosure</code>를 query에 추가하여 업로드를 하여야 합니다.</p>
<div class="admonition tip">
<p class="admonition-title">disclosure 사용 방법</p>
<p>PUT /{named-cluster}/{URI}?disclosure HTTP/1.1</p>
</div>
<p>만약 <code>disclosure</code>를 설정 하지 않으면 <code>Authorization</code> 인증을 하여야 합니다</p>
<pre><code>PUT /{named-cluster}/{URI} HTTP/1.1
Authorization: Basic  {base64(user/password)}
Content-Length: {`size`}
</code></pre>
<div class="admonition note">
<p>PUT /replica-name1/1.txt?pretty&amp;disclosure HTTP/1.1  <br />
Host: 127.0.0.1:8080  <br />
Connection: Close <br />
Authorization: Basic YWRtaW46YWRtaW4=  <br />
Content-Length: 20    </p>
<p>12345678901234567890    </p>
</div>
<h3 id="get-fileinfo">Get Fileinfo</h3>
<p>저장되어 있는 content의 정보를 가져옮니다.<br />
정보의 내용에는 onetimekey를 포함한 다운로드 <code>url</code>을 포함하고 있으며 해당 API를 사용 하기 위해서는 cluster role 이 <code>restapi</code>로 설정 되어 있어야 합니다</p>
<div class="admonition note">
<p>GET /{named-cluster}/fileinfo?key={URI}&amp;validity=5m HTTP/1.1<br />
Authorization: Basic  {base64(user/password)}  </p>
</div>
<p><code>{URI}</code>는 업로드에서 사용한 URI를 입력하면 되며<br />
<code>validity</code>는 onetimekey의 유효 시간을 설정 합니다. </p>
<h3 id="download">Download</h3>
<p>다운로에는 인증이 필요 없는 content와 인증이 필요한 content가 있습니다.</p>
<p>업로드 시 disclosure를 설정하여 업로드 할 경우 업로드한 content에 한해 인증 없이 다운로드가 가능합니다.</p>
<div class="admonition note">
<p>GET /{named-cluster}/{URI}?collection={user} HTTP/1.1  </p>
</div>
<p><code>collection</code> content의 개시자를 입력하면 됩니니다</p>
<p>인증이 필요한 content는 두가지 방식이 있으며
하나는 Authorization 설정 이고 다른 하나는 onetimekey를 이용하는 방법이 있습니다</p>
<div class="admonition note">
<p>GET /{named-cluster}/{URI} HTTP/1.1<br />
Authorization: Basic  {base64(user/password)}  </p>
</div>
<div class="admonition note">
<p>GET /{named-cluster}/{URI}?onetimekey= HTTP/1.1  </p>
</div>
<h3 id="get-prefix">Get Prefix</h3>
<p>업로드 되어 metadata로 관리되고 있는 목록을 가져 옮니다.<br />
해당 API를 사용 하기 위해서는 cluster role 이 <code>restapi</code>로 설정 되어 있어야 합니다</p>
<div class="admonition note">
<p>GET /{named-cluster}/prefix?key= HTTP/1.1  </p>
</div>
<p>key는 업로드시 uri의 path를 입력 하면 됩니다 <br />
예를 들어 아래와 같이 업로드를 하였다면   </p>
<div class="admonition note">
<p>GET /cluster-name/1/2/a.txt HTTP/1.1    </p>
</div>
<p>uri는 <code>/{named-cluster}/prefix?key=/1/2</code> 게 됩니다.</p>
<hr />
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../api-v0.6.0.0/" class="btn btn-neutral float-left" title="Version 0.6.0.0"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../../glossary/" class="btn btn-neutral float-right" title="Glossary">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../api-v0.6.0.0/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../glossary/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
